# Basic Notes

#### 05/14/2023

### Azure AD

#### definition
> Azure AD is a cloud-based identity and access management service.
> - Allows users to sign in and access resources:
  > - Provides access to internal resources, such as apps on your corporate network and intranet, along with any cloud apps developed by your own organization.
  > - Provides access to external resources, such as Microsoft Office 365, the Azure portal, and thousands of other SaaS applications. 

### Authentication vs Authorization
#### Authentication (Who are you?)
> Verifying the id of a thing
> thing can be a person, a device, or an application
- Authentication Design
> Authentication Egine, User store, Software Component
> Entry point can be authentication engine or software component

- 3rd party authentication engine
> Robust, flexible(authentication types, MFA)
> Contains user store(sometimes)
> Monintored
> Managed
> Provides SSO
> Standard based
> Cloud based - Azure AD, Okta, Ping, Auth0

- Authentication Type 
> 3 factors:
> Something you know(username/password, security questions)
> Something you have(phone, smart card, token)
> Something you are(biometrics)

- Two factor authentication
> for extremely sensitive data(banks, government)
> something you know + something you have(username/password + phone)
> something you have + something you are(phone + biometrics)

- Software Component
> User Token - data generated by authentication engine
> must be secure
> must be standards based
> Authentication Protocol - defines how the user token is generated
> 3 things:
> Participants in the authentication process 
> Flow of the authentication process
> Format of the user token
> Authentication Protocols:
> NTLM - Windows
> Kerberos - Windows
> OAuth2 - Web

- OAuth2
> Standard protocol for authentication and authorization
> Widely used, mainly in web apps 
> We'll discuss only high-level details
> OAuth2 is not a single protocol, but a framework of protocols
> components: 
> Resource Owner - the user
> Resource Server - the server that hosts the resource
> Client - the app that wants to access the resource
> Authorization Server - the server that authenticates the user and issues the token
> flow: Client App -> Resource Server(API) -> Authorization Server -> Resource Owner -> Authorization Server -> Resource Server -> Client App


#### Authorization (What are you allowed to do?)
> - Assigning privileges to a thing
> - Thing can be a person, a device, or an application
> - Examples: 
>   - User A can access the HR database
>   - Device B can access the internet
>   - Can run the AddSrudent() method
>   - Can not access the api/v1/orders URL


> - Two Types of Authorization
>   - Action Authorization
>   - Data Authorization

> - Role Based Access Control(RBAC)
>   - Users, Roles, Authorizations
>   - Users are assigned to roles
>   - Roles are assigned to authorizations
>   - Users inherit authorizations from roles

#### OpenID Connect
> - OpenID Connect is a standard protocol for authentication
> - It is built on top of OAuth2  
> - It is widely used, mainly in web apps
> - scopes: openid, profile, email
> - Claims:
>   - id_token
>   - access_token

#### Token
> - A token is a piece of data that represents a user's identity
> - It is generated by an authentication server
> - It is used to access resources
> - It is usually a JSON Web Token(JWT)
> - It contains claims
> - It is signed by the authentication server
> - It is usually short-lived
> - It is usually sent in the Authorization header of an HTTP request

- ID Token Contents contains various claims id the user, such as:
>   - given_name
>   - family_name
>   - email

- Access Token Contents contains various claims about the user, such as:
>  - Returned by OAuth2
>  - Format: Anything, usually JWT
>  - Accessed by client Never by the user

- JWT(Json Web Token)
>  - Has three parts: Header, Payload, Signature
> - Header: Contains the algorithm used to sign the token
  ```json
  {
    "alg": "RS256",
    "typ": "JWT"
  }
  ```
> - Payload: Contains the claims
> - Signature: Used to verify the token
> - JWT is signed by the authentication server
> example: www.jwt.io
> xxxx.xxxx.xxxx(header.payload.signature - base64 encoded) 


#### Identity Provider vs Identity Service
> - Identity Provider
>   - A service that authenticates user identities and issues security tokens.
>    - Stores users' credentials and validates their identities.
>    - Stores roles
>    - Stores groups
>    - Can be queried by authorization servers for users' data, groups, and roles.


> - Identity Service
>    - A service that authenticates user identities and issues security tokens.
>    - Does not hold users' data
>    - Authenticates users
>    - Works with identity providers to authenticate users




**Grow together!**

[//]: # (These are reference links used in the body of this note and get stripped out when the markdown processor does its job. There is no need to format nicely because it shouldn't be seen. Thanks SO - http://stackoverflow.com/questions/4823468/store-comments-in-markdown-syntax)

   [x]: <x>
 
 
